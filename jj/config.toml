"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Oscar SÃ¶derlund"
email = "odsod@users.noreply.github.com"

[templates]
git_push_bookmark = '"odsod/push-" ++ change_id.short()'
draft_commit_description = '''
concat(
  builtin_draft_commit_description,
  "\nJJ: ignore-rest\n",
  diff.git(),
)
'''

[aliases]
rebase-all = ["rebase", "-s", "(::trunk())+ & mutable()", "-d", "trunk()"]
pr = ["util", "exec", "--", "bash", "-lc", "jj git push -c @ && pr_url=$(gh pr create --head \"odsod/push-$(jj log --no-graph -r @ -T 'change_id.short()')\" --fill) && xdg-open \"$pr_url\" >/dev/null 2>&1"]
delta = ["diff", "--config", "ui.diff-formatter=\":git\"", "--config", "ui.pager=\"delta\""]

[revsets]
log = "::@ | ::trunk()"

[ui]
editor = ["nvim"]
default-command = ["log"]
show-diff-on-description-edit = true
pager = "delta"
diff-formatter = "difft"

[merge-tools.difft]
program = "difft"
diff-args = ["--color=always", "$left", "$right"]
